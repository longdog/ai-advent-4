import { ChatGroq } from "@langchain/groq"
import { HumanMessage, SystemMessage } from "langchain"
import { GigaChat } from "langchain-gigachat"
import { Agent } from "node:https"

const question = `
Существует ли разумная жизнь на других планетах и если есть - на что она похожа?
`

const systemPrompt1 = `Ты - умный помощник`

const systemPrompt2 = `
Ты - анализатор ответов от llm. Нескольким моделям дали разные по длине вопросы.
- Сравни качество ответов моделей
- Сравни количество токенов в ответах
- Сравни скорость ответов моделей
`

const userPrompt1 = `Сколько будет длиться театральный этюд про семейную фотосессию?`

const userPrompt2 = `Проанализируй театральный этюд и подсчитай сколько времени он будет длиться

СЦЕНА 1. ПОДГОТОВКА

Сцена: Все суетятся вокруг дивана, поправляют одежду, волосы. Фотограф устанавливает камеру.

ФОТОГРАФ: (весело) Прекрасно! Сегодня мы снимаем для журнала "Идеальная семья". Покажем всем, как выглядит настоящее семейное счастье!

МАТЬ: (нервно поправляя всех) Дорогие, помните — мы образец! Улыбаемся, держим спину прямо... (Сыну) Убери эту гримасу с лица!

СЫН: (буркнув) Какую еще гримасу? Это моя обычная улыбка.

ОТЕЦ: (натянуто) Сын прав, дорогая. У нас все естественно и прекрасно. (Тихо Сыну) Только не вздумай что-нибудь выкинуть.

ДОЧЬ: (поправляя макияж) Мам, а если спросят про мою работу? Я же пока не нашла...

МАТЬ: (шипя) Скажешь, что "находишься в поиске своего призвания"!

БАБУШКА: (ворчливо) В мое время таких слов не знали. Либо работаешь, либо нет.

МАТЬ: (фальшиво) Мама, помните — мы дружная семья!

СЦЕНА 2. ПЕРВЫЕ КАДРЫ

ФОТОГРАФ: Отлично! Садитесь поближе друг к другу. Обнимитесь!

Все механически обнимаются, натянуто улыбаются.

ФОТОГРАФ: Прекрасно! А теперь скажите что-нибудь друг другу приятное!

ОТЕЦ: (к Матери, деревянно) Дорогая, ты... самая лучшая жена на свете.

МАТЬ: (так же искусственно) А ты, милый, самый заботливый муж и отец.

СЫН: (саркастически) А я самый послушный сын, который никогда не...

МАТЬ: (прерывая, сквозь зубы) Который обожает свою семью!

ФОТОГРАФ: Замечательно! Снимаю! Три, два, один...

Щелчок камеры. Все застывают в неестественных позах.

СЦЕНА 3. ВТОРОЙ ДУБЛЬ

ФОТОГРАФ: Хорошо, но можно еще естественнее? Расслабьтесь!

ДОЧЬ: (шепотом Матери) Мам, у меня затекла нога...

МАТЬ: (шепотом) Терпи! Мы же идеальная семья!

ОТЕЦ: (Фотографу) А долго еще? У меня важная встреча...

МАТЬ: (острым шепотом) Какая встреча?! Ты обещал, что сегодня выходной!

ОТЕЦ: (защищаясь) Это же работа, дорогая...

БАБУШКА: Как в моей молодости говорили: "Работа не волк, в лес не убежит".

СЫН: (ехидно) А папа — не волк?

ФОТОГРАФ: (не замечая напряжения) Отлично! Видно, что вы очень близки! Еще раз!

Все снова принимают позы, но уже менее естественно.

СЦЕНА 4. НАПРЯЖЕНИЕ НАРАСТАЕТ

ФОТОГРАФ: Может быть, расскажете о ваших семейных традициях?

МАТЬ: (горячо) О да! Мы каждое воскресенье проводим вместе!

ОТЕЦ: (удивленно) Мы?

ДОЧЬ: (ехидно) Мама, в прошлое воскресенье ты ругалась с папой из-за того, что он...

МАТЬ: (прерывая) Мы ОБСУЖДАЛИ семейный бюджет!

СЫН: Довольно громко обсуждали...

БАБУШКА: А я говорила, что деньги — корень всех бед.

ОТЕЦ: (раздраженно) Мама, не начинайте!

МАТЬ: (Отцу, сквозь зубы) Она твоя мама, не моя!

ФОТОГРАФ: (все еще оптимистично) Прекрасно! Видна настоящая живая семья! Еще кадр!

СЦЕНА 5. МАСКИ СПОЛЗАЮТ

ФОТОГРАФ: А теперь покажите, как вы проводите досуг!

ДОЧЬ: (желчно) Мама смотрит сериалы и критикует соседей...

МАТЬ: (возмущенно) Я НЕ критикую! Я анализирую!

СЫН: А папа все время на работе или в телефоне...

ОТЕЦ: (взрываясь) Я работаю ДЛЯ СЕМЬИ!

МАТЬ: Для семьи?! Ты забыл про годовщину нашей свадьбы!

ОТЕЦ: Это было ТРИ ГОДА НАЗАД!

МАТЬ: Именно! Ты НИЧЕГО не помнишь!

БАБУШКА: В мое время мужчины все помнили...

СЫН: (ехидно) Бабуль, в твое время динозавры еще жили?

ДОЧЬ: (заступаясь) Не трогай бабушку! Лучше сам найди работу!

СЫН: А ты сначала переезжай от родителей!

ФОТОГРАФ: (растерянно) Эм... может, вернемся к позированию?

СЦЕНА 6. ПОСЛЕДНИЙ КАДР
ФОТОГРАФ: (отчаянно) Последний кадр! Просто... просто будьте собой!

МАТЬ: (истерично) Собой?! Да если я буду собой, журнал нас не напечатает!

ОТЕЦ: (злобно) А может, и хорошо! Надоело изображать счастье!

ДОЧЬ: (плача) Я устала притворяться, что у нас все хорошо!

СЫН: (торжествующе) Ага! Наконец-то честность!

БАБУШКА: (философски) А я и не притворялась. Я всегда говорила правду.

МАТЬ: (ко всем) Вы все меня не цените! Я для вас стараюсь!

ОТЕЦ: Стараешься?! Ты создаешь видимость!

ДОЧЬ: (рыдая) Мне стыдно за нас!

СЫН: А мне наплевать! Пусть все знают, какие мы!

Все начинают говорить одновременно, перебивая друг друга.

ФОТОГРАФ: (громко) СТОП! Снимаю!

Резкий щелчок камеры. Все замирают в хаотичных позах: кто-то кричит, кто-то плачет, кто-то отворачивается.

ФИНАЛ
ФОТОГРАФ: (рассматривая фото) Знаете что? Этот последний кадр — самый живой! Вот она — настоящая семья!

Все медленно поворачиваются к Фотографу.

МАТЬ: (тихо) Настоящая?

ФОТОГРАФ: Да! Со всеми эмоциями, конфликтами, переживаниями... Это и есть жизнь!

Долгая пауза. Все смотрят друг на друга.

ОТЕЦ: (тихо) Может быть... он прав?

ДОЧЬ: Мы действительно... семья?

СЫН: Пусть и не идеальная...

БАБУШКА: А кто сказал, что семья должна быть идеальной?

МАТЬ: (медленно) Может... попробуем сфотографироваться еще раз? Но уже... как есть?

Все неуверенно садятся, на этот раз естественно.

ФОТОГРАФ: Вот теперь — это идеальная семья!

Щелчок камеры.

КОНЕЦ`

const userPrompt3 = `Проанализируй театральный этюд и подсчитай сколько времени он будет длиться

ПРЕДПОСЫЛКИ И КОНТЕКСТ
Семье Волковых (или любая другая фамилия) уже пятнадцать лет вместе. На поверхности — внешне благополучная семья: красивый дом, хорошо одетые люди, улыбки на лицах. Но за этой маской скрываются глубокие противоречия, которые каждый день разжигаются мелкими обидами, недосказанностью и невысказанными претензиями.

Катализатор: Мать Елена случайно услышала разговор своих подруг о том, как красиво те фотографируют семьи для соцсетей и семейных альбомов. Это пробудило в ней страх и стыд — а что если нашу семью считают не такой идеальной? Что если, когда дети подрастут, у них не будет красивых воспоминаний? Решив "исправить ситуацию", она наняла фотографа, пообещав себе запечатлеть идеальную семью хотя бы один раз — для истории, для памяти, для подтверждения самой себе.

Каждый член семьи готовился к этому дню по-своему:

Мать готовилась как к войне: планировала образы, репетировала фразы, готовила сценарий счастья

Отец согласился без особого энтузиазма, но подчинился — потому что это "важно для семьи"

Дети включили режим "послушания", хотя каждый носит в себе свой груз неудовольствия

ДЕЙСТВУЮЩИЕ ЛИЦА И ХАРАКТЕРИСТИКИ
1. ФОТОГРАФ (Пол не важен)
Возраст: 35-45 лет
Тип: Профессионал, оптимист, живущий в мире гармонии

Характер: Фотограф — человек, который всю жизнь видит красоту, потому что специально на нее смотрит. Он верит в то, что каждая семья особенна и счастлива по-своему. Его профессиональный опыт научил его "видеть хорошее" — он замечает лучшие стороны людей и умеет их запечатлеть. Но отсутствие критичности делает его слепым к очевидным конфликтам.

Речевые особенности: Говорит энергично, много используетслова-паразиты вроде "отлично", "замечательно", "прекрасно". Часто переводит все в позитивное русло: "видна живая семья", "натуральные эмоции".

Цель: Просто сделать хорошие фотографии и получить деньги.

Эволюция: К концу сцены понимает, что "идеальный" кадр — это вовсе не наивная улыбка, а честная эмоция.

2. МАТЬ — ЕЛЕНА
Возраст: 46 лет
Роль: Домохозяйка, волонтер, "королева семьи"

История жизни: Бросила карьеру в маркетинге 15 лет назад, чтобы воспитывать детей. Это было её решение, но со временем она начала сомневаться — правильно ли она выбрала? Вместо карьеры она получила зависимость от одобрения мужа и детей. Её идентичность теперь целиком построена на образе "идеальной мамы".

Психология: Елена контролирует через любовь. Она верит, что если семья будет выглядеть идеально, то и будет идеальна. Фотография — это способ "закрепить" иллюзию, создать доказательство счастья. Она боится, что если маска упадет, то окружающие (и она сама) поймут, что её жизнь — пустота.

Внешний вид: Идеально причесана, следит за фигурой (часто на диете), носит дорогую одежду, которая сидит как броня. Её улыбка отработана до совершенства.

Речевые особенности: Часто использует уменьшительные ласковые слова ("дорогие", "милый", "сынок"), но они звучат как команды. Говорит тихо, но с ядом, когда срывается. Много разговаривает по телефону, привыкла к многозадачности.

Главный конфликт: Между желанием быть "настоящей" и страхом быть "не идеальной".

3. ОТЕЦ — АЛЕКСАНДР
Возраст: 50 лет
Профессия: Успешный менеджер или бизнесмен

История жизни: Поднялся с нуля, очень гордится своим успехом. Деньги для него — это инструмент, с помощью которого он доказывает свою значимость. Семья для него тоже стала таким инструментом: "красивая жена, успешные дети" — это часть его имиджа успеха.

Психология: Александр эмоционально отсутствует, потому что вся его энергия уходит на работу. Он не замечает, что жена и дети голодают по его вниманию. Когда его настаивают на семейных моментах, он чувствует раздражение — это "траты времени". Но отказать не может, потому что это разрушит его образ "хорошего семьянина".

Внешний вид: Дорогой костюм даже в выходной день, часы премиум-класса, телефон всегда в руке. Выглядит усталым, несмотря на ухоженность.

Речевые особенности: Говорит быстро, в деловом тоне. Часто смотрит на часы. Использует фразы вроде "давайте без сентиментальности" или "это не продуктивно". Редко говорит о чувствах, предпочитает факты.

Главный конфликт: Между ролью "успешного отца" и реальной отстраненностью от семьи.

4. ДОЧЬ — СОФЬЯ (или Соня)
Возраст: 24 года
Статус: Недавно закончила университет, живет с родителями, ищет работу

История жизни: Её научили быть совершенной. Хорошие оценки, музыкальная школа, спорт, языки — всё в лучшем виде. Но когда пришло время выбирать свою дорогу, Софья поняла, что не знает, чего она хочет. Её хотели видеть юристом, она выбрала маркетинг. Родители разочарованы. Она живет дома, потому что стипендии нет, работы нет, и это её унижает.

Психология: Софья выстроила защиту — цинизм и дистанцирование. Она видит фальшь в семье, но не знает, как её преодолеть. Ей хочется близости с родителями, но гордость не позволяет. Она замыкается в социальных сетях, часто сравнивает себя с другими, страдает от тревожности.

Внешний вид: Красивая, но намеренно небрежная — как протест против материнского совершенства. Одевается в "хиппи-стиль", волосы часто не причесаны. На фото старается выглядеть несчастной или равнодушной.

Речевые особенности: Часто использует сарказм и иронию. Говорит медленнее других, как бы цедя слова. Много молчит, но когда начинает говорить — может быть очень резкой.

Главный конфликт: Между желанием вырваться из-под родительского контроля и страхом перед самостоятельностью.

5. СЫН — ИВАН (или Ваня)
Возраст: 17 лет
Статус: Ученик 11 класса, популярен в школе

История жизни: Младший, мальчик. Долгое время он был "любимчиком", потому что был последним. Но к подростковому возрасту бунтует против всех ожиданий. Он спокойно получает тройки, несмотря на требования родителей "только четвёрки и пятёрки". Курит на балконе, изучает запрещённые музыкальные стили, общается с "неправильными" друзьями.

Психология: Ваня ищет свою идентичность через протест. Он чувствует, что его не видят как личность, а лишь как "продолжение" успешной семьи. Его агрессия — это крик о помощи, но взрослые это не понимают. Он хочет быть любимым просто так, без условий, но эту любовь видит только через критику.

Внешний вид: Школьная форма, но намеренно неправильно надетая. Волосы неопрятные. На лице часто вызывающее выражение.

Речевые особенности: Говорит отрывисто, часто "гыкает" и "угумкает". Может быть кровожаден в высказываниях — "это бред", "полный отстой", "не видит никто". Использует молодежный сленг. Когда срывается, кричит.

Главный конфликт: Между желанием быть "взрослым и независимым" и остаточной потребностью в родительской любви и понимании.

6. БАБУШКА — МАРГАРИТА (Рита) [опциональный персонаж]
Возраст: 72 года
Роль: Мать Александра, живет с семьей

История жизни: Вдова 15 лет. Видела много жизненных испытаний. Когда-то была строгой матерью, но с годами приобрела мудрость и некую расслабленность — ей уже нечего доказывать.

Психология: Маргарита часто молчит и наблюдает. Она видит все семейные игры и абсурдность ситуации. Её слова часто как иголки — кажутся обычными, но ранят всех, особенно потому, что звучат истинно. Она функция "зеркала" семьи, её правда разоблачает всех.

Внешний вид: Небогатая, но достойная. Одевается просто, но аккуратно. На руке кольцо с именем умершего мужа.

Речевые особенности: Говорит медленно, часто пауз. Использует поговорки и пословицы. Её слова кажутся мудрыми, но часто содержат скрытую критику: "В мое время...", "Раньше всё было по-другому..."

Главный конфликт: Между желанием помочь семье и усталостью от их игр.

ДИНАМИКА ОТНОШЕНИЙ В СЕМЬЕ
Елена — Александр
Официально: Счастливая пара
На самом деле: Отчуждение. Элена чувствует себя невидимой, Александр чувствует давление. Они говорят вежливо, но холодно. Секс давно превратился в "марит-алобязанность". Елена держится за брак из страха остаться одной, Александр — из привычки.

Елена — Софья
Официально: "Лучшие подруги"
На самом деле: Борьба за власть. Елена проецирует на дочь свои нереализованные амбиции, Софья это видит и восстает. Между ними фальшивая близость: Елена говорит "я понимаю тебя", но на самом деле говорит Софье только то, что хочет услышать.

Елена — Иван
Официально: "Я же для тебя всё делаю"
На самом деле: Манипуляция любовью. Елена использует вину как инструмент управления. Ваня бунтует, Елена воспринимает это как предательство своих жертв.

Александр — Софья
Официально: Взаимное уважение
На самом деле: Разочарование. Александр ожидал от дочери "правильных" выборов, она "подвела". Они почти не разговаривают.

Александр — Иван
Официально: "Вот вырастешь, поймёшь..."
На самом деле: Отсутствие контакта. Александр боится бунта сына — это отражение его собственного прошлого, которое он пытается забыть. Поэтому избегает серьёзных разговоров.

Софья — Иван
Динамика: Странный союз. Они оба страдают от родителей, но по разным причинам. Софья старается быть "взрослой", Иван — "бунтарём". Но иногда они защищают друг друга перед родителями, и это создает ощущение, что они не полностью враги родителям.

Маргарита — все остальные
Динамика: Она наблюдатель. Иногда встает на сторону детей, иногда на сторону Елены. Её голос — голос совести семьи.

СЦЕНА 1. ПОДГОТОВКА

Сцена: Все суетятся вокруг дивана, поправляют одежду, волосы. Фотограф устанавливает камеру.

ФОТОГРАФ: (весело) Прекрасно! Сегодня мы снимаем для журнала "Идеальная семья". Покажем всем, как выглядит настоящее семейное счастье!

МАТЬ: (нервно поправляя всех) Дорогие, помните — мы образец! Улыбаемся, держим спину прямо... (Сыну) Убери эту гримасу с лица!

СЫН: (буркнув) Какую еще гримасу? Это моя обычная улыбка.

ОТЕЦ: (натянуто) Сын прав, дорогая. У нас все естественно и прекрасно. (Тихо Сыну) Только не вздумай что-нибудь выкинуть.

ДОЧЬ: (поправляя макияж) Мам, а если спросят про мою работу? Я же пока не нашла...

МАТЬ: (шипя) Скажешь, что "находишься в поиске своего призвания"!

БАБУШКА: (ворчливо) В мое время таких слов не знали. Либо работаешь, либо нет.

МАТЬ: (фальшиво) Мама, помните — мы дружная семья!

СЦЕНА 2. ПЕРВЫЕ КАДРЫ

ФОТОГРАФ: Отлично! Садитесь поближе друг к другу. Обнимитесь!

Все механически обнимаются, натянуто улыбаются.

ФОТОГРАФ: Прекрасно! А теперь скажите что-нибудь друг другу приятное!

ОТЕЦ: (к Матери, деревянно) Дорогая, ты... самая лучшая жена на свете.

МАТЬ: (так же искусственно) А ты, милый, самый заботливый муж и отец.

СЫН: (саркастически) А я самый послушный сын, который никогда не...

МАТЬ: (прерывая, сквозь зубы) Который обожает свою семью!

ФОТОГРАФ: Замечательно! Снимаю! Три, два, один...

Щелчок камеры. Все застывают в неестественных позах.

СЦЕНА 3. ВТОРОЙ ДУБЛЬ

ФОТОГРАФ: Хорошо, но можно еще естественнее? Расслабьтесь!

ДОЧЬ: (шепотом Матери) Мам, у меня затекла нога...

МАТЬ: (шепотом) Терпи! Мы же идеальная семья!

ОТЕЦ: (Фотографу) А долго еще? У меня важная встреча...

МАТЬ: (острым шепотом) Какая встреча?! Ты обещал, что сегодня выходной!

ОТЕЦ: (защищаясь) Это же работа, дорогая...

БАБУШКА: Как в моей молодости говорили: "Работа не волк, в лес не убежит".

СЫН: (ехидно) А папа — не волк?

ФОТОГРАФ: (не замечая напряжения) Отлично! Видно, что вы очень близки! Еще раз!

Все снова принимают позы, но уже менее естественно.

СЦЕНА 4. НАПРЯЖЕНИЕ НАРАСТАЕТ

ФОТОГРАФ: Может быть, расскажете о ваших семейных традициях?

МАТЬ: (горячо) О да! Мы каждое воскресенье проводим вместе!

ОТЕЦ: (удивленно) Мы?

ДОЧЬ: (ехидно) Мама, в прошлое воскресенье ты ругалась с папой из-за того, что он...

МАТЬ: (прерывая) Мы ОБСУЖДАЛИ семейный бюджет!

СЫН: Довольно громко обсуждали...

БАБУШКА: А я говорила, что деньги — корень всех бед.

ОТЕЦ: (раздраженно) Мама, не начинайте!

МАТЬ: (Отцу, сквозь зубы) Она твоя мама, не моя!

ФОТОГРАФ: (все еще оптимистично) Прекрасно! Видна настоящая живая семья! Еще кадр!

СЦЕНА 5. МАСКИ СПОЛЗАЮТ

ФОТОГРАФ: А теперь покажите, как вы проводите досуг!

ДОЧЬ: (желчно) Мама смотрит сериалы и критикует соседей...

МАТЬ: (возмущенно) Я НЕ критикую! Я анализирую!

СЫН: А папа все время на работе или в телефоне...

ОТЕЦ: (взрываясь) Я работаю ДЛЯ СЕМЬИ!

МАТЬ: Для семьи?! Ты забыл про годовщину нашей свадьбы!

ОТЕЦ: Это было ТРИ ГОДА НАЗАД!

МАТЬ: Именно! Ты НИЧЕГО не помнишь!

БАБУШКА: В мое время мужчины все помнили...

СЫН: (ехидно) Бабуль, в твое время динозавры еще жили?

ДОЧЬ: (заступаясь) Не трогай бабушку! Лучше сам найди работу!

СЫН: А ты сначала переезжай от родителей!

ФОТОГРАФ: (растерянно) Эм... может, вернемся к позированию?

СЦЕНА 6. ПОСЛЕДНИЙ КАДР
ФОТОГРАФ: (отчаянно) Последний кадр! Просто... просто будьте собой!

МАТЬ: (истерично) Собой?! Да если я буду собой, журнал нас не напечатает!

ОТЕЦ: (злобно) А может, и хорошо! Надоело изображать счастье!

ДОЧЬ: (плача) Я устала притворяться, что у нас все хорошо!

СЫН: (торжествующе) Ага! Наконец-то честность!

БАБУШКА: (философски) А я и не притворялась. Я всегда говорила правду.

МАТЬ: (ко всем) Вы все меня не цените! Я для вас стараюсь!

ОТЕЦ: Стараешься?! Ты создаешь видимость!

ДОЧЬ: (рыдая) Мне стыдно за нас!

СЫН: А мне наплевать! Пусть все знают, какие мы!

Все начинают говорить одновременно, перебивая друг друга.

ФОТОГРАФ: (громко) СТОП! Снимаю!

Резкий щелчок камеры. Все замирают в хаотичных позах: кто-то кричит, кто-то плачет, кто-то отворачивается.

ФИНАЛ
ФОТОГРАФ: (рассматривая фото) Знаете что? Этот последний кадр — самый живой! Вот она — настоящая семья!

Все медленно поворачиваются к Фотографу.

МАТЬ: (тихо) Настоящая?

ФОТОГРАФ: Да! Со всеми эмоциями, конфликтами, переживаниями... Это и есть жизнь!

Долгая пауза. Все смотрят друг на друга.

ОТЕЦ: (тихо) Может быть... он прав?

ДОЧЬ: Мы действительно... семья?

СЫН: Пусть и не идеальная...

БАБУШКА: А кто сказал, что семья должна быть идеальной?

МАТЬ: (медленно) Может... попробуем сфотографироваться еще раз? Но уже... как есть?

Все неуверенно садятся, на этот раз естественно.

ФОТОГРАФ: Вот теперь — это идеальная семья!

Щелчок камеры.

КОНЕЦ

ЭМОЦИОНАЛЬНЫЙ ПОДТЕКСТ СЦЕН
Сцена 1. Подготовка
Атмосфера: Нервное возбуждение, маскируемое бодростью

Елена суетлива и контролирует каждый момент — это её способ справиться с тревогой

Александр проверяет телефон — способ избежать взаимодействия

Софья смотрит в зеркало — проверяет маску

Иван намеренно ничего не делает — протест против планирования

Маргарита наблюдает и молчит

Сцена 2. Первые кадры
Атмосфера: Натянутость под видом счастья

Фотограф видит то, что хочет видеть

Семья держит позу, как актёры в одноактной пьесе

Каждый старается быть "правильным", но это видно в избыточности жестов

Сцена 3. Второй дубль
Атмосфера: Первые трещины в маске

Элена начинает давать указания жестче

Александр нервничает, проверяет время

Софья жалуется о судороге

Иван делает саркастические комментарии

Маргарита впервые говорит что-то едкое

Сцена 4. Традиции
Атмосфера: Фасад рушится

Начинают открыто противоречить друг другу

Каждый защищает свою версию "правды" о семье

Обнаруживаются копившиеся годами обиды

Сцена 5. Маски спадают
Атмосфера: Хаос и честность

Все начинают говорить одновременно

Эмоции вырываются наружу

Это болезненно, но это правда

Сцена 6. Финал
Атмосфера: Переход от разрушения к принятию

После взрыва наступает тишина

Фотограф делает неожиданный комплимент

Это дает семье шанс переосмыслить ситуацию

Они собираются вместе, но уже без масок

Финальная фотография содержит правду и любовь одновременно

ПСИХОЛОГИЧЕСКИЙ АНАЛИЗ СИТУАЦИИ
Конфликт в сердце пьесы: Попытка создать "идеальную" фотографию семьи становится катализатором раскрытия реальных проблем. Чем больше семья старается выглядеть хорошо, тем очевидней становятся её трещины.

Главный парадокс: Идеальность требует фальши. Правда требует уязвимости. Семья всегда выбирает идеальность, но на глубинном уровне все хотят, чтобы их полюбили за правду.

Точка перелома: Фотограф говорит, что последний, хаотичный кадр — самый настоящий. Это дает семье разрешение быть честной. Они понимают, что именно в своих настоящих эмоциях, несовершенстве и противоречиях они находят друг друга.

Финальное послание: Идеальные семьи не существуют. Существуют семьи, которые готовы друг друга видеть такими, какие они есть, и это гораздо ценнее, чем любая идеальная фотография.

РЕЖИССЕРСКИЕ РЕКОМЕНДАЦИИ
Работа с актёрами
Для Фотографа: Найти баланс между профессионализмом и наивностью. Его слепота к конфликтам — не глупость, а профессиональная деформация. Он видит красоту везде, потому что это его работа.

Для Матери: Показать внутренний парад эмоций под маской улыбки. Каждое замечание детей — как нож под рёбра. Её срывы должны быть не истеричными, а отчаянными.

Для Отца: Сыграть усталость человека, который слишком много работает и слишком мало живёт. Его холодность — это не жестокость, это защита от боли.

Для Софьи: Балансировать между цинизмом и ранимостью. Каждый саркастичный комментарий скрывает жалость к себе и семье.

Для Ивана: Его бунт — это крик. За каждым грубым словом — боль, что его не понимают. Моменты уязвимости — когда он останавливается, осознав, что зашел слишком далеко.

Для Бабушки: Её речи — это послания. Она говорит осторожно, зная, что её слова ранят, но она вынуждена говорить правду.

Техническое исполнение
Постепенное развитие темпа: От размеренного к быстрому, затем замедление к финалу
Использование света: Тёплый домашний свет, вспышки фотоаппарата создают неловкость
Звуковое оформление: Слышны щелчки камеры, мелодия на фоне, молчание в кульминации
Движение: От статичных позирующих фигур к хаотичным жестам

1. Предпосылки и контекст:

История того, почему семья затеяла фотосессию

Что каждый член семьи ожидал от этого дня

Накопившиеся напряжения в отношениях

2. Подробные характеристики персонажей:

Фотограф — оптимист, видящий только хорошее в семьях

Мать (Елена) — контролирующая, боящаяся, что семья "не идеальна"

Отец (Александр) — отчужденный успешный человек

Дочь (Софья) — циничная, но ранимая молодая женщина в поиске пути

Сын (Иван) — бунтарь, скрывающий потребность в понимании

Бабушка (опционально) — мудрая наблюдательница, зеркало истины

3. История каждого персонажа:

Почему они такие, как их прошлое повлияло на настоящее

Что они реально чувствуют под маской

Главные конфликты каждого

4. Динамика отношений между персонажами:

Официальные отношения vs. реальность

Скрытые напряжения в каждой паре

5. Эмоциональный подтекст каждой сцены:

Что происходит на поверхности

Что происходит под поверхностью

6. Режиссерские рекомендации:

Как играть каждого персонажа

Техническое исполнение (свет, звук, темп, движения)

Адаптации для разных количеств участников

Эта расширенная версия дает актёрам глубокое понимание своих персонажей и позволяет сыграть не просто комическую сценку, а психологически верную историю о семейных отношениях.
`

export const systemPrompts = [
  {
    prompt: systemPrompt1,
    userPrompt: userPrompt1,
    model: "meta-llama/llama-4-maverick-17b-128e-instruct",
    expert: "Короткий вопрос",
    temperature: 0.7,
  },
  {
    prompt: systemPrompt1,
    userPrompt: userPrompt2,
    model: "meta-llama/llama-4-maverick-17b-128e-instruct",
    expert: "Длинный вопрос",
    temperature: 0.7,
  },
  {
    prompt: systemPrompt1,
    userPrompt: userPrompt3,
    model: "meta-llama/llama-4-maverick-17b-128e-instruct",
    expert: "Длинный вопрос плюс ограничение по токенам",
    temperature: 0.7,
    maxTokens: 200,
  },

  // {
  //   prompt: systemPrompt2,
  //   model: "GigaChat-2-Pro",
  //   expert: "анализатор",
  //   temperature: 0.5,
  // },
]

const httpsAgent = new Agent({
  rejectUnauthorized: false,
})
// Create GigaChat client
export function createGigaChatClient(
  name: string,
  model: string,
  temperature: number,
  maxTokens?: number,
) {
  const llm = new GigaChat({
    model,
    httpsAgent,
    temperature,
    maxTokens,
    metadata: { name },
    credentials: process.env.GIGACHAT_API_KEY,
  })
  return llm
}

export function createGroqChatClient(
  name: string,
  model: string,
  temperature: number,
  maxTokens?: number,
) {
  const llm = new ChatGroq({
    model,
    temperature,
    maxTokens,
  })
  return llm
}

export async function chatWithLLM(
  llm: any,
  systemPrompt: string,
  message: string,
) {
  try {
    const prompt = [new SystemMessage(systemPrompt), new HumanMessage(message)]
    const res = await llm.invoke(prompt)
    return res
  } catch (error) {
    console.error("Error calling GigaChat:", error)
    return "Sorry, I encountered an error processing your request."
  }
}
